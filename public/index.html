<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Brandynette Video Player - Port 6969</title>
  <style>
    /* BambiSleep Chat Styles */
    @import url("https://fonts.googleapis.com/css2?family=Audiowide&display=swap");

    :root {
      --primary-color: #0c2a2aE6;
      --primary-alt: #15aab5E6;
      --secondary-color: #40002fE6;
      --secondary-alt: #cc0174E6;
      --tertiary-color: #720241e6;
      --tertiary-alt: #02b893E6;
      --button-color: #df0471E6;
      --button-alt: #110000E6;
      --nav-color: #0a2626E6;
      --nav-alt: #17dbd8E6;
      --transparent: #124141E6;
      --error: #ff3333E6;
      --border: 3px ridge;
      --border-radius: 8px;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Audiowide', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 50%, var(--tertiary-color) 100%);
      min-height: 100vh;
      color: white;
    }

    /* List element spacing improvements */
    .video-list-item {
      margin: 1rem 0;
      padding: 1.2rem;
      background: var(--transparent);
      border: var(--border) var(--nav-alt);
      border-radius: var(--border-radius);
      transition: all 0.3s ease;
    }

    .video-list-item:hover {
      background: var(--primary-alt);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    /* Smaller names styling */
    .video-name {
      font-size: 0.9rem;
      font-weight: 400;
      opacity: 0.9;
    }

    .video-title {
      font-size: 1.1rem;
      font-weight: 500;
    }

    /* Button styling with theme */
    .theme-button {
      background: var(--button-color);
      color: white;
      border: var(--border) var(--button-alt);
      border-radius: var(--border-radius);
      padding: 0.8rem 1.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Audiowide', sans-serif;
    }

    .theme-button:hover {
      background: var(--button-alt);
      border-color: var(--button-color);
      transform: scale(1.05);
    }

    .theme-button.selected {
      background: var(--secondary-alt);
      border-color: var(--nav-alt);
    }
  </style>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

      function VideoPlayer({ videoSrc, title }) {
        const [isPlaying, setIsPlaying] = useState(false);
        const [currentTime, setCurrentTime] = useState(0);
        const [duration, setDuration] = useState(0);
        const [volume, setVolume] = useState(1);
        const [loading, setLoading] = useState(true);
        const [error, setError] = useState(null);

        const videoRef = React.useRef(null);

        useEffect(() => {
          const video = videoRef.current;
          if (!video) return;

          const handleLoadedMetadata = () => {
            setDuration(video.duration);
            setLoading(false);
          };

          const handleTimeUpdate = () => setCurrentTime(video.currentTime);
          const handlePlay = () => setIsPlaying(true);
          const handlePause = () => setIsPlaying(false);
          const handleEnded = () => setIsPlaying(false);
          const handleError = () => {
            setError('Failed to load video');
            setLoading(false);
          };

          video.addEventListener('loadedmetadata', handleLoadedMetadata);
          video.addEventListener('timeupdate', handleTimeUpdate);
          video.addEventListener('play', handlePlay);
          video.addEventListener('pause', handlePause);
          video.addEventListener('ended', handleEnded);
          video.addEventListener('error', handleError);

          return () => {
            video.removeEventListener('loadedmetadata', handleLoadedMetadata);
            video.removeEventListener('timeupdate', handleTimeUpdate);
            video.removeEventListener('play', handlePlay);
            video.removeEventListener('pause', handlePause);
            video.removeEventListener('ended', handleEnded);
            video.removeEventListener('error', handleError);
          };
        }, [videoSrc]);

        const togglePlay = () => {
          const video = videoRef.current;
          if (video.paused) {
            video.play();
          } else {
            video.pause();
          }
        };

        const handleSeek = (e) => {
          const video = videoRef.current;
          const rect = e.currentTarget.getBoundingClientRect();
          const percent = (e.clientX - rect.left) / rect.width;
          video.currentTime = percent * duration;
        };

        const handleVolumeChange = (e) => {
          const newVolume = parseFloat(e.target.value);
          setVolume(newVolume);
          videoRef.current.volume = newVolume;
        };

        const formatTime = (time) => {
          const minutes = Math.floor(time / 60);
          const seconds = Math.floor(time % 60);
          return `${minutes}:${seconds.toString().padStart(2, '0')}`;
        };

        if (error) {
          return React.createElement('div', { style: { color: 'red', padding: '2rem', textAlign: 'center' } }, error);
        }

        return React.createElement('div', {
          style: {
            background: 'var(--transparent)',
            borderRadius: 'var(--border-radius)',
            padding: '1.5rem',
            margin: '1.5rem',
            border: 'var(--border) var(--tertiary-alt)',
            boxShadow: '0 4px 12px rgba(0,0,0,0.3)'
          }
        },
          React.createElement('div', { style: { position: 'relative', background: 'black', borderRadius: '8px', overflow: 'hidden', marginBottom: '1rem' } },
            React.createElement('video', {
              ref: videoRef,
              src: videoSrc,
              style: { width: '100%', height: 'auto', maxHeight: '70vh', display: 'block', cursor: 'pointer' },
              onClick: togglePlay
            }),
            loading && React.createElement('div', {
              style: {
                position: 'absolute',
                top: '50%',
                left: '50%',
                transform: 'translate(-50%, -50%)',
                color: 'white',
                textAlign: 'center'
              }
            }, 'Loading video...')
          ),
          React.createElement('div', {
            style: {
              display: 'flex',
              alignItems: 'center',
              gap: '1.2rem',
              padding: '1.2rem',
              background: 'var(--nav-color)',
              color: 'white',
              borderRadius: 'var(--border-radius)',
              border: 'var(--border) var(--nav-alt)'
            }
          },
            React.createElement('button', {
              onClick: togglePlay,
              disabled: loading,
              style: {
                background: 'var(--button-color)',
                border: 'var(--border) var(--button-alt)',
                color: 'white',
                fontSize: '1.3rem',
                cursor: 'pointer',
                padding: '0.8rem',
                borderRadius: 'var(--border-radius)',
                transition: 'all 0.3s ease'
              }
            }, isPlaying ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è'),
            React.createElement('div', {
              style: {
                flex: 1,
                height: '8px',
                background: 'var(--button-alt)',
                borderRadius: 'var(--border-radius)',
                cursor: 'pointer',
                border: '1px solid var(--nav-alt)'
              },
              onClick: handleSeek
            },
              React.createElement('div', {
                style: {
                  height: '100%',
                  background: 'linear-gradient(90deg, var(--tertiary-alt), var(--primary-alt))',
                  width: `${(currentTime / duration) * 100}%`,
                  borderRadius: 'var(--border-radius)',
                  transition: 'width 0.1s ease'
                }
              })
            ),
            React.createElement('span', { style: { fontSize: '0.9rem', fontFamily: 'monospace', minWidth: '80px' } },
              `${formatTime(currentTime)} / ${formatTime(duration)}`
            ),
            React.createElement('span', null, 'üîä'),
            React.createElement('input', {
              type: 'range',
              min: '0',
              max: '1',
              step: '0.1',
              value: volume,
              onChange: handleVolumeChange,
              style: { width: '80px' }
            })
          ),
          React.createElement('div', { style: { textAlign: 'center', marginTop: '1.2rem' } },
            React.createElement('h3', {
              className: 'video-title',
              style: {
                margin: 0,
                color: 'var(--nav-alt)',
                fontSize: '1rem',
                fontFamily: 'Audiowide, sans-serif',
                textShadow: '2px 2px 4px rgba(0,0,0,0.5)'
              }
            }, title)
          )
        );
      }

      function App() {
        const [videos, setVideos] = useState([]);
        const [publicFiles, setPublicFiles] = useState([]);
        const [loading, setLoading] = useState(true);
        const [error, setError] = useState(null);
        const [selectedVideo, setSelectedVideo] = useState(null);

        useEffect(() => {
          fetchData();
        }, []);

        const fetchData = async () => {
          try {
            setLoading(true);

            // Fetch videos
            const videosResponse = await fetch('/api/videos');
            if (!videosResponse.ok) throw new Error('Failed to fetch videos');
            const videosData = await videosResponse.json();
            setVideos(videosData.videos);

            // Fetch public files
            const publicResponse = await fetch('/api/public');
            if (!publicResponse.ok) throw new Error('Failed to fetch public files');
            const publicData = await publicResponse.json();
            setPublicFiles(publicData.files);

            // Auto-select first video
            if (videosData.videos.length > 0) {
              setSelectedVideo(videosData.videos[0]);
            }
          } catch (err) {
            console.error('Error fetching data:', err);
            setError('Failed to load data. Please try again.');
          } finally {
            setLoading(false);
          }
        };

        if (loading) {
          return React.createElement('div', {
            style: {
              display: 'flex',
              flexDirection: 'column',
              alignItems: 'center',
              justifyContent: 'center',
              minHeight: '100vh',
              color: 'white',
              textAlign: 'center'
            }
          },
            React.createElement('div', {
              style: {
                width: '50px',
                height: '50px',
                border: '4px solid rgba(255,255,255,0.3)',
                borderTop: '4px solid white',
                borderRadius: '50%',
                animation: 'spin 1s linear infinite',
                marginBottom: '1rem'
              }
            }),
            React.createElement('p', null, 'Loading...')
          );
        }

        if (error) {
          return React.createElement('div', {
            style: {
              display: 'flex',
              flexDirection: 'column',
              alignItems: 'center',
              justifyContent: 'center',
              minHeight: '100vh',
              color: 'white',
              textAlign: 'center'
            }
          },
            React.createElement('h2', { style: { color: '#ff6b6b' } }, 'Oops! Something went wrong'),
            React.createElement('p', null, error),
            React.createElement('button', {
              onClick: fetchData,
              className: 'theme-button',
              style: {
                background: 'var(--button-color)',
                color: 'white',
                border: 'var(--border) var(--button-alt)',
                padding: '1rem 2rem',
                borderRadius: 'var(--border-radius)',
                cursor: 'pointer',
                fontFamily: 'Audiowide, sans-serif',
                fontSize: '0.9rem'
              }
            }, 'Try Again')
          );
        }

        return React.createElement('div', { style: { minHeight: '100vh', color: 'white' } },
          React.createElement('header', {
            style: {
              textAlign: 'center',
              padding: '2rem 1rem',
              background: 'var(--nav-color)',
              backdropFilter: 'blur(10px)',
              borderBottom: 'var(--border) var(--nav-alt)'
            }
          },
            React.createElement('h1', {
              style: {
                margin: '0 0 0.5rem 0',
                fontSize: '2.5rem',
                fontWeight: '700',
                textShadow: '2px 2px 4px rgba(0,0,0,0.5)',
                fontFamily: 'Audiowide, sans-serif',
                color: 'var(--nav-alt)',
                textTransform: 'uppercase',
                letterSpacing: '2px'
              }
            }, 'üé¨ Brandynette Video Player'),
            React.createElement('p', { style: { margin: 0, fontSize: '1.1rem', opacity: 0.9 } },
              `Premium video streaming on port 6969`)
          ),
          React.createElement('main', { style: { padding: '2rem 1rem', maxWidth: '1200px', margin: '0 auto' } },
            videos.length === 0
              ? React.createElement('div', { style: { textAlign: 'center', padding: '3rem 1rem' } },
                  React.createElement('h2', { style: { color: '#ffd93d' } }, 'No videos found'),
                  React.createElement('p', null, 'Please add video files to the BRANDIFICATION folder')
                )
              : React.createElement('div', null,
                  videos.length > 1 && React.createElement('div', { style: { marginBottom: '2rem', textAlign: 'center' } },
                    React.createElement('h3', { style: { marginBottom: '1rem' } }, 'Select a video:'),
                    React.createElement('div', { style: { display: 'flex', flexWrap: 'wrap', gap: '1rem', justifyContent: 'center', margin: '1.5rem 0' } },
                      videos.map(video =>
                        React.createElement('button', {
                          key: video,
                          onClick: () => setSelectedVideo(video),
                          className: selectedVideo === video ? 'theme-button selected' : 'theme-button',
                          style: {
                            background: selectedVideo === video ? 'var(--secondary-alt)' : 'var(--button-color)',
                            color: 'white',
                            border: selectedVideo === video ? 'var(--border) var(--nav-alt)' : 'var(--border) var(--button-alt)',
                            borderRadius: 'var(--border-radius)',
                            padding: '1rem 1.5rem',
                            cursor: 'pointer',
                            transition: 'all 0.3s ease',
                            fontFamily: 'Audiowide, sans-serif',
                            fontSize: '0.85rem',
                            margin: '0.3rem'
                          }
                        }, video)
                      )
                    )
                  ),
                  selectedVideo && React.createElement(VideoPlayer, {
                    videoSrc: `/videos/${selectedVideo}`,
                    title: selectedVideo
                  })
                ),
            React.createElement('div', {
              style: {
                marginTop: '3rem',
                textAlign: 'center',
                background: 'var(--transparent)',
                padding: '2rem',
                borderRadius: 'var(--border-radius)',
                border: 'var(--border) var(--tertiary-alt)'
              }
            },
              React.createElement('h3', {
                style: {
                  fontFamily: 'Audiowide, sans-serif',
                  color: 'var(--nav-alt)',
                  fontSize: '1.2rem',
                  marginBottom: '1.5rem'
                }
              }, 'API Endpoints:'),
              React.createElement('div', {
                style: {
                  display: 'grid',
                  gap: '1rem',
                  maxWidth: '600px',
                  margin: '0 auto',
                  fontSize: '0.9rem'
                }
              },
                React.createElement('p', { className: 'video-name' }, `üì∫ Videos: ${videos.length} found`),
                React.createElement('p', { className: 'video-name' }, `üìÅ Public files: ${publicFiles.length} found`),
                React.createElement('p', { className: 'video-name' }, 'üîó /api/videos - List videos'),
                React.createElement('p', { className: 'video-name' }, 'üîó /api/public - List public files'),
                React.createElement('p', { className: 'video-name' }, 'üîó /health - Server health')
              )
            )
          ),
          React.createElement('footer', {
            style: {
              textAlign: 'center',
              padding: '1.5rem',
              background: 'var(--nav-color)',
              backdropFilter: 'blur(10px)',
              borderTop: 'var(--border) var(--nav-alt)',
              marginTop: '2rem'
            }
          },
            React.createElement('p', null, 'Built with ‚ù§Ô∏è using Express & React on port 6969')
          )
        );
      }

      // Add CSS animation for loading spinner
      const style = document.createElement('style');
      style.textContent = `
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `;
      document.head.appendChild(style);

      ReactDOM.render(React.createElement(App), document.getElementById('root'));
    </script>
</body>

</html>
